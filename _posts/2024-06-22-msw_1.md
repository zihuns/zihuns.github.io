---
title: "MSW í™œìš©ê¸° | (1) ì†Œê°œ ë° ì ìš©ê¸°"
contribution: 100
date: 2024-06-22 01:00:00 +0900
lastmod: 2025-09-21 14:30:00 +0900
start_date: 2024-04-15
end_date: 2024-06-18
series: "MSW í™œìš©ê¸°"
order: 1
excerpt: "MSW(Mock Service Worker)ë¥¼ ì†Œê°œí•˜ê³ , í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ í™˜ê²½ì— ì ìš©í•˜ë©° ê²ªì€ ì‹œí–‰ì°©ì˜¤ë¥¼ ê³µìœ í•©ë‹ˆë‹¤."
categories: [Frontend, MSW]
tags: [MSW, ServiceWorker, Mocking]
---

> ğŸ“Œ ì´ ê¸€ì€ **MSW ì‹œë¦¬ì¦ˆ** ì¤‘ 1í¸ì…ë‹ˆë‹¤.  
> 2í¸: [Mock API Schema ìë™ ìƒì„±í•˜ê¸°](/posts/msw_2)  
> 3í¸: [Plugin ë°©ì‹ìœ¼ë¡œ ì œê³µí•˜ê¸°](/posts/msw_3)

---

## ë„ì… ë°°ê²½
ëŒ€ë¶€ë¶„ì˜ í”„ë¡œì íŠ¸ëŠ”  
UI ê°œë°œ â†’ **ëŒ€ê¸°**(ë°±ì—”ë“œ API ì¤€ë¹„) â†’ API ì—°ë™ ìˆœìœ¼ë¡œ ì§„í–‰ë©ë‹ˆë‹¤.  
í”„ëŸ°íŠ¸ì—”ë“œ ì…ì¥ì—ì„  **ëŒ€ê¸° ì‹œê°„ì´ ê¸¸ì–´ì§ˆìˆ˜ë¡** ì „ì²´ ì¼ì •ê³¼ QA ì¼ì •ì´ ë°€ë ¤ ê°œë°œ íš¨ìœ¨ì´ ì €í•˜ë©ë‹ˆë‹¤. ì´ë¥¼ ê°œì„ í•˜ê¸° ìœ„í•´ **MSW**ë¥¼ ë„ì…í–ˆìŠµë‹ˆë‹¤.

![í”„ë¡œì íŠ¸ í”Œë¡œìš°](https://oliveyoung.tech/static/c69cd71db4e07b3f58e97ee10ea7d97a/ac7a9/projectflow.png)
![í­ê·„](/assets/img/msw_1/msw_1_1.png)

---

## MSW ì†Œê°œ
**MSW(Mock Service Worker)** ëŠ” *Service Worker*ë¥¼ ì´ìš©í•´ **ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì„ ê°€ë¡œì±„ê³  ëª¨ì˜ ì‘ë‹µì„ ë°˜í™˜**í•˜ëŠ” API ëª¨í‚¹ ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤.  
ì„œë²„ë¥¼ ë³„ë„ êµ¬ì¶•í•  í•„ìš” ì—†ì´ ë¸Œë¼ìš°ì €Â·Node í™˜ê²½ ëª¨ë‘ì—ì„œ ë™ì¼í•œ í•¸ë“¤ëŸ¬ë¥¼ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## MSWì˜ íŠ¹ì§•

### 1. Service Workerë€?
- **ë©”ì¸ ìŠ¤ë ˆë“œì™€ ë¶„ë¦¬**ëœ ë°±ê·¸ë¼ìš´ë“œ ìŠ¤ë ˆë“œ  
- ìš”ì²­ ê°€ë¡œì±„ê¸°, ìºì‹±, ì˜¤í”„ë¼ì¸ ì²˜ë¦¬ ë“± ê°€ëŠ¥  
- IE ë¯¸ì§€ì›, HTTPS(ë˜ëŠ” localhost) ìš”êµ¬

![Service Worker êµ¬ì¡°](/assets/img/msw_1/msw_1_2.png)

### 2. MSW ë™ì‘ ì›ë¦¬
1. ë¸Œë¼ìš°ì €ì— Service Worker ì„¤ì¹˜  
2. ë„¤íŠ¸ì›Œí¬ ìš”ì²­ ê°€ë¡œì±„ê¸°  
3. ì¼ì¹˜í•˜ëŠ” í•¸ë“¤ëŸ¬ê°€ ìˆìœ¼ë©´ Mock ì‘ë‹µ ë°˜í™˜  
4. ì„œë²„ê°€ ì—†ì–´ë„ í”„ë¡ íŠ¸ ê°œë°œÂ·í…ŒìŠ¤íŠ¸ ê°€ëŠ¥

![MSW ë™ì‘ ì›ë¦¬](/assets/img/msw_1/msw_1_3.png)

### 3. ê°œë°œ í”Œë¡œìš° ì˜ˆì‹œ
1. ê¸°íšì„œ í™•ì • í›„ API ìŠ¤í™ í•©ì˜  
2. í”„ëŸ°íŠ¸ëŠ” **MSWë¡œ Mocking**â€†í•˜ë©° UI ê°œë°œ  
3. ë°±ì—”ë“œ API ì œê³µ ì‹œ **ìŠ¤ìœ„ì¹˜ë§Œ ë„ê³ ** ì‹¤ì„œë²„ í†µì‹   
4. ë™ì¼ ì½”ë“œë¡œ QA â†’ í”„ë¡œë•ì…˜ ë°°í¬

![ê°œë°œ ë°©ì‹](/assets/img/msw_1/msw_1_4.png)

---

## ë‹¤ë¥¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ì˜ ì°¨ì´ì 
![ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¹„êµ](assets/img/msw_1/msw_1_5.png)

| ë¼ì´ë¸ŒëŸ¬ë¦¬             | íŠ¹ì§•                              | í•œê³„                          |
| ---------------------- | --------------------------------- | ----------------------------- |
| **axios-mock-adapter** | axios ì „ìš©Â·ì½”ë“œ ë‚´ë¶€ ëª¨í‚¹         | ë„¤íŠ¸ì›Œí¬ ë ˆì´ì–´ ê°€ë¡œì±„ê¸° ë¶ˆê°€ |
| **nock**               | Node í™˜ê²½ ì „ìš©                    | ë¸Œë¼ìš°ì € ë¯¸ì§€ì›               |
| **MSW**                | Service Worker ê¸°ë°˜ ë„¤íŠ¸ì›Œí¬ ëª¨í‚¹ | ì´ˆê¸° HTTPS ì„¤ì • í•„ìš”          |

---

## ì„¤ì¹˜ ë° êµ¬ì„±

### í™˜ê²½
- Node v16.20.1  
- Vue v2.7.16 + **Vite v4.5.3**  
- MSW v2.2.14  
- vite-plugin-mkcert v1.17.5

**1. íŒ¨í‚¤ì§€ ì„¤ì¹˜ ë° ì´ˆê¸°í™”**
```bash
# MSW ì„¤ì¹˜
npm i -D msw

# public ë””ë ‰í„°ë¦¬ì— Service Worker ìŠ¤í¬ë¦½íŠ¸ ìƒì„±
npx msw init public/
```
{: file="bash"}

**2. í•¸ë“¤ëŸ¬ ë° ì›Œì»¤ ì„¤ì •**
API ìš”ì²­ì„ ê°€ë¡œì±„ì„œ ë°˜í™˜í•  ëª¨ì˜ ì‘ë‹µì„ ì •ì˜í•˜ëŠ” í•¸ë“¤ëŸ¬ë¥¼ ì‘ì„±í•˜ê³ , ì´ë¥¼ ì„œë¹„ìŠ¤ ì›Œì»¤ì— ë“±ë¡í•©ë‹ˆë‹¤.

```javascript
// @/mocks/sampleHandler.js
import { http, HttpResponse } from 'msw'

export const handlers = [
  http.get('/api/user', () => {
    return HttpResponse.json({ name: 'Ji-hun Seo' })
  })
]
```
{: file="sampleHandler.js"}

```javascript
// @/mocks/mswSetupWorker.js
import { setupWorker } from 'msw/browser'
import { handlers } from '@/mocks/sampleHandler'

// ì›Œì»¤ ì„¤ì • ë° ì‹œì‘
export const initMSW = () => {
  const worker = setupWorker(...handlers)
  worker.start({ onUnhandledRequest: 'bypass' }) // ì²˜ë¦¬ë˜ì§€ ì•Šì€ ìš”ì²­ì€ ì‹¤ì œ ì„œë²„ë¡œ ì „ë‹¬
}
```
{: file="mswSetupWorker.js"}

**3. HTTPS ê°œë°œ ì„œë²„ ì„¤ì • (mkcert)**
Service WorkerëŠ” `localhost` ë˜ëŠ” HTTPS í™˜ê²½ì—ì„œë§Œ ë™ì‘í•˜ë¯€ë¡œ, `mkcert`ë¥¼ ì‚¬ìš©í•´ ë¡œì»¬ HTTPS í™˜ê²½ì„ êµ¬ì¶•í•©ë‹ˆë‹¤.

```bash
# mkcert ì„¤ì¹˜ ë° ë¡œì»¬ ì¸ì¦ì„œ ìƒì„±
brew install mkcert
mkcert -install && mkcert localhost

# Vite í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜
npm i -D vite-plugin-mkcert
```
{: file="bash"}

`vite.config.js`ì— í”ŒëŸ¬ê·¸ì¸ì„ ì¶”ê°€í•©ë‹ˆë‹¤.
```javascript
// vite.config.js
import { defineConfig } from 'vite'
import mkcert from 'vite-plugin-mkcert'

export default defineConfig({
  server: { https: true },
  plugins: [mkcert()]
})
```
{: file="vite.config.js"}

![image.png](/assets/img/msw_1/msw_1_6.png)

SSL ì„¤ì •ì´ ë˜ì–´ìˆì§€ ì•Šë‹¤ë©´ ìœ„ì™€ ê°™ì€ ì—ëŸ¬ë¥¼ ë§Œë‚˜ê²Œ ë©ë‹ˆë‹¤.

MSWì—ì„œ [ê¶Œì¥í•˜ëŠ” ë°©ë²•](https://mswjs.io/docs/recipes/using-local-https/)ì€ ì‹œìŠ¤í…œ ë ˆë²¨, ë¸Œë¼ìš°ì € ë ˆë²¨ 2ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤.

ì €ëŠ” ì „ìë¥¼ ì„ íƒí–ˆìŠµë‹ˆë‹¤.

**4. ì–´í”Œë¦¬ì¼€ì´ì…˜ì— ì ìš©**
`main.js`ì—ì„œ `initMSW()`ë¥¼ í˜¸ì¶œí•˜ì—¬ MSWë¥¼ í™œì„±í™”í•©ë‹ˆë‹¤.

```javascript
// main.js
import { initMSW } from '@/mocks/mswSetupWorker'

initMSW()
```
{: file="main.js"}


---

## ë™ì‘ í™•ì¸
MSWê°€ ì •ìƒ ì„¤ì¹˜ë˜ë©´ ë¸Œë¼ìš°ì € ì½˜ì†”ì—  
`[MSW] Mocking enabled.` ë©”ì‹œì§€ê°€ ì¶œë ¥ë˜ê³  Network íƒ­ì—ì„œ Service Worker ì‘ë‹µì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![image.png](/assets/img/msw_1/msw_1_7.png)

![image.png](/assets/img/msw_1/msw_1_8.png)

---

## ì‹œí–‰ì°©ì˜¤

1. **ë¸Œë¼ìš°ì € vs Node í˜¼ìš©**  
   Node í•¸ë“¤ëŸ¬ê¹Œì§€ ì„¤ì •í•˜ë ¤ë‹¤ ë¶ˆí•„ìš”í•œ ì˜ì¡´ì„±ì„ ì¶”ê°€í•´ ë¹Œë“œ ì˜¤ë¥˜ ë‹¤ë°œ â†’ ë¸Œë¼ìš°ì € ì „ìš©ìœ¼ë¡œ ì •ë¦¬
2. **Vite 3 â†’ 4 ì—…ê·¸ë ˆì´ë“œ**  
   GraphQL import ë¬¸ë²• ì˜¤ë¥˜(`Unexpected string`) ë°œìƒ â†’ Vite 4ë¡œ ì˜¬ë ¤ í•´ê²°
3. **HTTPS ì¸ì¦ ë¬¸ì œ**  
   ë¸Œë¼ìš°ì €-ë ˆë²¨ ì¸ì¦ë§Œìœ¼ë¡œëŠ” íŒ€ì› PCì—ì„œ ë¯¸ì‘ë™ â†’ **mkcert**ë¡œ ì‹œìŠ¤í…œ ë ˆë²¨ ì¸ì¦ì„œ ì ìš©
4. **ë²„ì „Â·ìŠ¤í‚¤ë§ˆ ë³€ê²½**ìœ¼ë¡œ í•¸ë“¤ëŸ¬ ë¶ˆì¼ì¹˜ â†’ ê³µì‹ë¬¸ì„œÂ·ì»¤ë®¤ë‹ˆí‹° ì‚¬ë¡€ ì°¸ê³  í›„ ìˆ˜ì •

![ì‹œí–‰ì°©ì˜¤](/assets/img/msw_1/msw_1_9.png)

---

## ê¸°ìˆ  ìŠ¤íƒ (Tech Stack)
`MSW` `Vue.js` `Vite` `mkcert` `Swagger UI` `faker` `json-schema-faker`

---

## ì¶”í›„ í•  ì¼
- API **ìŠ¤í‚¤ë§ˆ ìë™ ìˆ˜ì§‘** â†’ Mock ìƒì„± íŒŒì´í”„ë¼ì¸í™”  
- Storybook + MSW ì—°ë™  
- MSW íˆ´ë°” UI & Mock ë°ì´í„° ê´€ë¦¬ ë„êµ¬ ê°œë°œ

---

## ì°¸ê³ 
- [MSW ê³µì‹ë¬¸ì„œ](https://mswjs.io/docs)
- [ì˜¬ë¦¬ë¸Œì˜ í…Œí¬ ë¸”ë¡œê·¸](https://oliveyoung.tech/blog/2024-01-23/msw-frontend/)
- [ì¹´ì¹´ì˜¤ í…Œí¬ ë¸”ë¡œê·¸](https://tech.kakao.com/2021/09/29/mocking-fe/)

---

## ğŸ—“ï¸ ì—…ë°ì´íŠ¸ ë‚´ì—­

- **2025-07-29:**
  - MSW Nodeí™˜ê²½ ì ìš© ë° Vitest ì—°ë™
  - **ê°œë°œ ê¸°ê°„:** 25.07.25 - 25.07.29

- **2024-12-10:**
  - ì½”ë“œ ë¦¬íŒ©í† ë§ ë° Mixin ë°©ì‹ ì¶”ê°€
  - **ê°œë°œ ê¸°ê°„:** 24.11.28 - 24.12.10

---