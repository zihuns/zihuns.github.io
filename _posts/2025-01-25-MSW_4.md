---
title: MSW(Mock Service Worker) - 4. 시행착오 및 추후 할 일
date: 2025-01-25 01:00:00 +09:00
categories: [Frontend, MSW]
tags: [MSW]
---

## **시행착오**

우선, 시행착오를 하게 된 가장 큰 요인은 제가 msw를 잘 알지 못한 상태에서 무작정 다른 사람들이 해놓은 것을 보고 따라하려고 했다는 것입니다. ChatGPT와 블로그 글만 믿고 msw를 이해하지 못한 상태에서 시작한 것이 문제였습니다.

msw는 브라우저환경, 노드환경 두가지 환경을 지원합니다. 브라우저환경에서 mocking하는 것이 목적이기에 현재 단계에서는 브라우저환경만 세팅하면 되는 것이었습니다. 이 간단하면서도 가장 중요한 사실을 모른 체 무작정 따라하다보니, 원하는데로 되지 않고 터미널에서는 컴파일 에러가 2배로 발생했습니다.

최근에 프로젝트 번들러를 vite로 교체했는데, 번들링 과정에서 graphql package에서 Uncaught SyntaxError: Unexpected string 에러가 발생했었습니다. 이 증상을 해결하는 방법도 스택오버플로우에서 다양하게 제시했었지만 vite를 3 -> 4로 버전업하면 쉽게 해결된다는 것을 나중에 알았습니다.

![image.png](/assets/img/2025-01-25/2025-01-25-MSW_4_1.png)

가장 마지막으로 저를 괴롭혔던 것은 SSL이였습니다. service worker는 실제 네트워크를 가로채는 것이기 때문에 강력한 인증이 필요했고 HTTPS를 사용했어야 했습니다. SSL 에러를 해결하기 위해서 msw 공식문서에서는 2가지 방식(브라우저 레벨, 시스템레벨)을 제시했고 처음엔 브라우저 레벨 방식을 채택하여 제 로컬환경에서 작동하는 것을 확인하고 원격 브랜치에 반영하였습니다. 그러나, 다른 팀원의 환경에서는 작동하지 않았고, 이 원인을 찾다보니 제가 인증을 하기 위해 여러가지 방식을 하던 중 시스템레벨 방식에서 서비스 워커를 한번 등록을 하게 되었고, 그 후, 변경을 하더라도 브라우저를 종료하지 않는 이상 정상작동 한다는 것을 알게 되었습니다. 그래서, 시스템레벨 인증 방식(mkcert)을 사용하여 SSL 인증 문제를 해결하였고 다른 팀원의 환경에서도 정상작동 하는 것을 확인했습니다.

위에서 시행착오를 순서대로 서술했지만, 이 문제들은 순서대로 일어나지 않았으며 복잡적으로 일어났기에 해결하는 과정이 마냥 쉽지만은 않았습니다. 그 외에도 msw버전을 바꾸면서 해결하려고 하는 등 여러가지 문제해결의 시도들이 있었습니다.

## **추후 할 일**

API 스키마 가져오기, node환경 구성, storybook 연동, 툴바 형태 MSW 등등 + 스키마 형식 창으로 보여주기 mock데이터 생성하기 버튼, 저장, 조작

![image.png](/assets/img/2025-01-25/2025-01-25-MSW_4_2.png)