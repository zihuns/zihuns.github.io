---
title: "TDDë¬¸í™” ë„ì… | (4) Tech ë°œí‘œ, Vitestë¡œ ì•ˆì •ì ì¸ í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œí•˜ê¸°"
contribution: 100
date: 2025-11-09 01:00:00 +0900
lastmod: 2025-11-09 22:52:53 +0900
start_date: 2025-10-20
end_date: 2025-11-06
categories: [Frontend, Test, CI/CD]
tags: [GitLab, CI/CD, Vitest, Coverage, Vue.js, Test, TechTalk]
excerpt: "ì‚¬ë‚´ Tech ë¶€ë¬¸ì—ì„œ ë°œí‘œí•œ 'Vitestë¡œ ì•ˆì •ì ì¸ í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œí•˜ê¸°' ì‚¬ë¡€ë¥¼ ê³µìœ í•©ë‹ˆë‹¤. Vitestì™€ GitLab CI/CDë¥¼ í™œìš©í•´ í…ŒìŠ¤íŠ¸ ìë™í™” ì‹œìŠ¤í…œì„ êµ¬ì¶•í•˜ê³ , ì´ë¥¼ í†µí•´ ì–»ì€ ì •ëŸ‰ì /ì •ì„±ì  ì„±ê³¼ë¥¼ ì •ë¦¬í–ˆìŠµë‹ˆë‹¤."
---

> ğŸ“Œ ì´ ê¸€ì€ **TDD ì‹œë¦¬ì¦ˆ** ì¤‘ 4í¸ì…ë‹ˆë‹¤.  
> 1í¸: [Vitest ì „í™˜ê³¼ ì»¤ë²„ë¦¬ì§€ ê¸°ë°˜ í’ˆì§ˆ ê´€ë¦¬](/posts/tdd_vitest)  
> 2í¸: [ì£¼ê°„ ì»¤ë²„ë¦¬ì§€ ëŒ€ì‹œë³´ë“œë¡œ ì‹œê°í™”í•˜ê¸°](/posts/tdd_bigbro)  
> 3í¸: [ì»¤ë²„ë¦¬ì§€ ì¸¡ì • ë° ìë™í™” ì‹œìŠ¤í…œ êµ¬ì¶• (GitLab + Vitest)](/posts/tdd_gitlab)

---

ì•ˆë…•í•˜ì„¸ìš”, ìµœê·¼ ì‚¬ë‚´ Tech ë¶€ë¬¸ì—ì„œ ì§„í–‰í•œ **'Vitestë¡œ ì•ˆì •ì ì¸ í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œí•˜ê¸°'** ë°œí‘œ ë‚´ìš©ì„ ë¸”ë¡œê·¸ ê¸€ë¡œ ì •ë¦¬í•˜ì—¬ ê³µìœ í•©ë‹ˆë‹¤.

ì´ ê¸€ì—ì„œëŠ” í…ŒìŠ¤íŠ¸ ìë™í™” ì‹œìŠ¤í…œì„ êµ¬ì¶•í•˜ê²Œ ëœ ë°°ê²½ë¶€í„° ì‹¤ì œ ì ìš© ì‚¬ë¡€, ê·¸ë¦¬ê³  CI/CD ì—°ë™ì„ í†µí•´ ì–»ì€ ì„±ê³¼ê¹Œì§€ì˜ ê³¼ì •ì„ ë‹´ì•˜ìŠµë‹ˆë‹¤.

![Tech ë¶€ë¬¸ ë°œí‘œ ì¼ì • ìŠ¬ë™ ê³µì§€](/assets/img/2025-01-25/tdd_ppt_1.png)
_Tech ë¶€ë¬¸ ë°œí‘œ ì¼ì • ìŠ¬ë™ ê³µì§€_

## 1. ë„ì… ë°°ê²½: ì™œ í…ŒìŠ¤íŠ¸ ìë™í™”ì¸ê°€?

ìµœê·¼ í”„ë¡ íŠ¸ì—”ë“œ í”„ë¡œì íŠ¸ì˜ ë³µì¡ë„ê°€ ì¦ê°€í•˜ë©´ì„œ ì½”ë“œì˜ ì•ˆì •ì„± í™•ë³´ê°€ ê·¸ ì–´ëŠ ë•Œë³´ë‹¤ ì¤‘ìš”í•´ì¡ŒìŠµë‹ˆë‹¤. ì €í¬ íŒ€ ì—­ì‹œ ë‹¤ìŒê³¼ ê°™ì€ ë¬¸ì œë“¤ì„ ê²ªê³  ìˆì—ˆìŠµë‹ˆë‹¤.

- ğŸ˜° **ë°˜ë³µë˜ëŠ” ë²„ê·¸**: ë²„ê·¸ë¥¼ ìˆ˜ì •í•˜ë©´ ë˜ ë‹¤ë¥¸ ë²„ê·¸ê°€ ë°œìƒí•˜ëŠ” ì•…ìˆœí™˜
- â° **ìˆ˜ë™ í…ŒìŠ¤íŠ¸ì˜ í•œê³„**: ë°°í¬ ì „ ëª¨ë“  ê¸°ëŠ¥ì„ ìˆ˜ë™ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•˜ëŠ” ë° ë“œëŠ” ì‹œê°„ê³¼ ë¹„ìš©
- ğŸ˜“ **íšŒê·€ í…ŒìŠ¤íŠ¸ì˜ í”¼ë¡œê°**: ë°˜ë³µì ì¸ íšŒê·€ í…ŒìŠ¤íŠ¸ë¡œ ì¸í•œ íŒ€ì˜ í”¼ë¡œë„ ì¦ê°€
- ğŸ¤ **ì‚¬ì´ë“œ ì´í™íŠ¸ ì¦ê°€**: í˜‘ì—… ì‹œ ì˜ˆìƒì¹˜ ëª»í•œ ì‚¬ì´ë“œ ì´í™íŠ¸ë¡œ ì¸í•œ ë¶ˆì•ˆê°

ì´ëŸ¬í•œ ë¬¸ì œë“¤ì„ í•´ê²°í•˜ê³  **ì§€ì† ê°€ëŠ¥í•œ ê°œë°œ ë¬¸í™”**ë¥¼ ë§Œë“¤ê¸° ìœ„í•´, **Vitestë¥¼ í™œìš©í•œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ìë™í™”ì™€ GitLab CI/CD ì—°ë™**ì„ ë„ì…í•˜ê¸°ë¡œ ê²°ì •í–ˆìŠµë‹ˆë‹¤.

---

## 2. í…ŒìŠ¤íŠ¸ ì¸í”„ë¼ êµ¬ì¶•

### 2.1. ê¸°ìˆ  ìŠ¤íƒ: ì™œ Vitestì¸ê°€?

ê¸°ì¡´ì— ì‚¬ìš©í•˜ë˜ Jestì˜ ëŒ€ì•ˆìœ¼ë¡œ **Vitest**ë¥¼ ì„ íƒí–ˆìŠµë‹ˆë‹¤. ì´ìœ ëŠ” ëª…í™•í–ˆìŠµë‹ˆë‹¤.

| í•­ëª©            | ì„¤ëª…                                                             |
| :-------------- | :--------------------------------------------------------------- |
| âš¡ **ë¹ ë¥¸ ì†ë„** | Vite ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•˜ì—¬ Jest ëŒ€ë¹„ ìµœëŒ€ 10ë°° ë¹ ë¥¸ ì‹¤í–‰ ì†ë„        |
| ğŸ§  **ì‰¬ìš´ ì„¤ì •** | Vite ì„¤ì •ì„ ê·¸ëŒ€ë¡œ í™œìš©í•˜ë©°, ë³„ë„ íŠ¸ëœìŠ¤íŒŒì¼ ì—†ì´ ì¦‰ì‹œ ì‚¬ìš© ê°€ëŠ¥ |
| ğŸ’ **ì¢‹ì€ DX**   | ì§ê´€ì ì¸ CLI, HMR ì§€ì›, ì‹œê°ì ì¸ UI ì œê³µ                         |

**ì£¼ìš” ìŠ¤íƒ**
- **í…ŒìŠ¤íŠ¸ ëŸ¬ë„ˆ**: `Vitest`
- **í…ŒìŠ¤íŠ¸ ìœ í‹¸ë¦¬í‹°**: `@vue/test-utils`
- **API ëª¨í‚¹**: `MSW (Mock Service Worker)`
- **í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„±**: `Faker.js`, `MockDataBuilder.js` (ìì²´ ì œì‘ ë¹Œë”)

### 2.2. Vitest í™˜ê²½ ì„¤ì •

`vitest.config.js`ì— í…ŒìŠ¤íŠ¸ í™˜ê²½ì„ ì„¤ì •í–ˆìŠµë‹ˆë‹¤. CI í™˜ê²½ì—ì„œëŠ” JUnit, Cobertura ë“± ë¦¬í¬í„°ë¥¼ ì¶”ê°€í•˜ì—¬ GitLabê³¼ ì—°ë™í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.

```javascript 
import { defineConfig } from 'vitest/config';
import path from 'path';

export default defineConfig({
  test: {
    globals: true,
    environment: "jsdom",
    setupFiles: path.resolve(__dirname, "__vitest__/vitest.setup.js"),
    include: ["__vitest__/**/*.test.{js,ts,tsx}"],
    reporters: process.env.CI ? ["default", "junit"] : ["default"],
    coverage: {
      enabled: process.env.COVERAGE === "true",
      reporter: ["html", "json-summary", "text", "cobertura"],
    },
  },
  resolve: {
    alias: [{ find: "@", replacement: path.resolve(__dirname, "src") }],
  },
});
```
{: file="vitest.config.js"}

### 2.3. í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„± ìë™í™”

ë³µì¡í•œ API ì‘ë‹µ ë°ì´í„°ë¥¼ ë§¤ë²ˆ ìˆ˜ë™ìœ¼ë¡œ ë§Œë“œëŠ” ê²ƒì€ ë¹„íš¨ìœ¨ì ì…ë‹ˆë‹¤. ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ë¹Œë” íŒ¨í„´ì„ ì ìš©í•œ `MockDataBuilder.js`ë¥¼ ìì²´ ì œì‘í•˜ì—¬ í…ŒìŠ¤íŠ¸ ë°ì´í„° ì¤€ë¹„ ì‹œê°„ì„ **80% ë‹¨ì¶•**í–ˆìŠµë‹ˆë‹¤.

```javascript
// ë¹Œë” íŒ¨í„´ì„ í™œìš©í•œ í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„±
const mockData = new MockDataBuilder()
  .addModule("product_05")
  .withProducts(2)
  .build();
```

### 2.4. MSWë¥¼ í™œìš©í•œ API ëª¨í‚¹

**MSW(Mock Service Worker)**ë¥¼ ì‚¬ìš©í•´ ë¸Œë¼ìš°ì €(ê°œë°œ í™˜ê²½)ì™€ Node.js(í…ŒìŠ¤íŠ¸ í™˜ê²½)ì—ì„œ ë™ì¼í•œ Mock APIë¥¼ ì‚¬ìš©í•˜ë„ë¡ í™˜ê²½ì„ í†µì¼í–ˆìŠµë‹ˆë‹¤. `MockDataBuilder`ì™€ ì—°ë™í•˜ì—¬ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ í•¸ë“¤ëŸ¬ íŒ©í† ë¦¬ë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.

```javascript 
import { http, HttpResponse } from "msw";
import MockDataBuilder from "@mock/builder/MockDataBuilder.js";

export const createProduct05Handlers = () => ({
  default: http.get("/api/display/product_05", () => {
    const data = new MockDataBuilder().addModule("product_05").withProducts(2).build();
    return HttpResponse.json({ returnCode: "200", data });
  }),
});
```
{: file="src/mocks/handlers/product_05.handler.js"}
---

## 3. Vue ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸ ì ìš© ì‚¬ë¡€

`product_05.vue` ì»´í¬ë„ŒíŠ¸(ìƒí’ˆ 2ê°œë¥¼ ë‚˜ì—´í•˜ëŠ” ëª¨ë“ˆ)ë¥¼ ì˜ˆì‹œë¡œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.

### 3.1. í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

| ì‹œë‚˜ë¦¬ì˜¤        | ì„¤ëª…                                             |
| :-------------- | :----------------------------------------------- |
| **ê¸°ë³¸ ë Œë”ë§** | ìƒí’ˆ ê°œìˆ˜ì— ë”°ë¼ ëª¨ë“ˆì´ ë…¸ì¶œ/ë¹„ë…¸ì¶œë˜ëŠ”ì§€ ê²€ì¦   |
| **API ì—°ë™**    | MSWë¡œ ëª¨í‚¹í•œ API ì‘ë‹µ ê¸°ë°˜ìœ¼ë¡œ ë Œë”ë§ë˜ëŠ”ì§€ ê²€ì¦ |
| **Edge Case**   | API ì‹¤íŒ¨ ë° ì˜ˆì™¸ ìƒí™©ì„ ì˜¬ë°”ë¥´ê²Œ ì²˜ë¦¬í•˜ëŠ”ì§€ ê²€ì¦ |

### 3.2. í…ŒìŠ¤íŠ¸ ì½”ë“œ ì˜ˆì‹œ

**âœ… ê¸°ë³¸ ë Œë”ë§ í…ŒìŠ¤íŠ¸**
```javascript
it("ìƒí’ˆì´ 2ê°œ ë¯¸ë§Œì´ë©´ ëª¨ë“ˆì´ ë…¸ì¶œë˜ì§€ ì•Šì•„ì•¼ í•¨", () => {
  // Arrange: ìƒí’ˆ 1ê°œ ë°ì´í„° ìƒì„±
  const data = new MockDataBuilder().addModule("product_05").withProducts(1).build();
  // Act: ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸
  const wrapper = mount(Product05, { propsData: { data } });

  // Assert
  expect(wrapper.vm.isView).toBe(false);
  expect(wrapper.html()).not.toContain("module-wrapper");
});
```

**âœ… API ì—°ë™ í…ŒìŠ¤íŠ¸**
```javascript
it("APIë¡œë¶€í„° ìƒí’ˆ 2ê°œë¥¼ ë°›ì•„ì˜¤ë©´ ëª¨ë“ˆì´ ë…¸ì¶œë˜ì–´ì•¼ í•¨", async () => {
  // Arrange: MSWë¡œ API ì‘ë‹µ ëª¨í‚¹
  server.use(createProduct05Handlers().default);
  
  // Act
  const response = await fetch("/api/display/product_05");
  const result = await response.json();
  const wrapper = mount(Product05, { propsData: { data: result.data } });

  // Assert
  expect(wrapper.vm.isView).toBe(true);
  expect(wrapper.vm.productListData.product.length).toBe(2);
});
```

### 3.3. Vitest UIë¡œ ì‹œê°ì  í”¼ë“œë°± ë°›ê¸°

`npx vitest --ui` ëª…ë ¹ì–´ë¡œ í…ŒìŠ¤íŠ¸ ê³¼ì •ì„ ì‹œê°ì ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆì–´ ê°œë°œ ê²½í—˜(DX)ì´ í¬ê²Œ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤.

<figure>
  <img src="/assets/vitest-ui-screenshot.png" alt="Vitest UI ì‹¤í–‰ ì˜ˆì‹œ" />
  <figcaption>Vitest UIë¥¼ í†µí•œ ì‹¤ì‹œê°„ í…ŒìŠ¤íŠ¸ í”¼ë“œë°±</figcaption>
</figure>

---

## 4. GitLab CI/CD ì—°ë™ ë° ì„±ê³¼

### 4.1. CI/CD íŒŒì´í”„ë¼ì¸ ìë™í™”

MR(Merge Request) ìƒì„± ì‹œ GitLab CI íŒŒì´í”„ë¼ì¸ì´ ìë™ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ê³  ì»¤ë²„ë¦¬ì§€ë¥¼ ì¸¡ì •í•˜ë„ë¡ `.gitlab-ci.yml`ì„ ì„¤ì •í–ˆìŠµë‹ˆë‹¤.

```yaml 
coverage:
  stage: test
  variables:
    CI: "true"
    COVERAGE: "true"
  script:
    - npx vitest run
  artifacts:
    reports:
      junit: junit.xml
      coverage_report:
        coverage_format: cobertura
        path: coverage/cobertura-coverage.xml
```
{: file=".gitlab-ci.yml"}
### 4.2. ì„±ê³¼ ë° ê²°ë¡ 

í…ŒìŠ¤íŠ¸ ìë™í™” ì‹œìŠ¤í…œì„ ë„ì…í•œ ê²°ê³¼, ë‹¤ìŒê³¼ ê°™ì€ ì„±ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.

#### ğŸ“ˆ ì •ëŸ‰ì  ì„±ê³¼
- **ê²°í•¨ ë°€ë„ 26% ê°ì†Œ**: ì‘ì—…ëŸ‰ ëŒ€ë¹„ ê²°í•¨ ë¹„ìœ¨ì´ í¬ê²Œ ì¤„ì—ˆìŠµë‹ˆë‹¤.
- **ë²„ê·¸ ì‚¬ì „ ì°¨ë‹¨**: CI ë‹¨ê³„ì—ì„œ ë°°í¬ ì „ ë²„ê·¸ë¥¼ **3ê±´** ì‚¬ì „ì— ì°¨ë‹¨í–ˆìŠµë‹ˆë‹¤.
- **í…ŒìŠ¤íŠ¸ ì†ë„ í–¥ìƒ**: **720ê°œ**ì˜ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë¥¼ **90ì´ˆ ì´ë‚´**ì— ì™„ë£Œí•©ë‹ˆë‹¤.
- **ë°ì´í„° ì¤€ë¹„ ì‹œê°„ 80% ë‹¨ì¶•**: `MockDataBuilder` ë„ì…ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ë°ì´í„° ì¤€ë¹„ ì‹œê°„ì„ í¬ê²Œ ì¤„ì˜€ìŠµë‹ˆë‹¤.

#### âœ¨ ì •ì„±ì  ì„±ê³¼
- **ë¦¬íŒ©í† ë§ ìì‹ ê° í–¥ìƒ**: í…ŒìŠ¤íŠ¸ ì½”ë“œê°€ ì•ˆì „ë§ ì—­í• ì„ í•˜ì—¬ ë ˆê±°ì‹œ ì½”ë“œ ê°œì„ ì´ ê°€ì†í™”ë˜ì—ˆìŠµë‹ˆë‹¤.
- **ì½”ë“œ ë¦¬ë·° íš¨ìœ¨ ì¦ëŒ€**: MR ë¦¬ë·° ì‹œ, í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ í†µí•´ ê¸°ëŠ¥ì˜ ì˜ë„ë¥¼ ëª…í™•íˆ íŒŒì•…í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
- **ê°œë°œ ë¬¸í™” ê°œì„ **: ì‹œê°ì ì¸ ì„±ê³¼(ë±ƒì§€, ëŒ€ì‹œë³´ë“œ)ë¥¼ í†µí•´ ê°œë°œ ë§Œì¡±ë„ì™€ ë™ê¸° ë¶€ì—¬ê°€ í–¥ìƒë˜ì—ˆìŠµë‹ˆë‹¤.

í˜„ì¬ ì½”ë“œ ì»¤ë²„ë¦¬ì§€ëŠ” **25.64%**(10ì›” 5ì£¼ì°¨ ê¸°ì¤€)ì´ë©°, **70%** ë‹¬ì„±ì„ ëª©í‘œë¡œ ì ì§„ì ìœ¼ë¡œ í™•ëŒ€í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì£¼ê°„ ë¦¬í¬íŠ¸ëŠ” Bigbro ëŒ€ì‹œë³´ë“œì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

Vitestì™€ GitLab CI/CDë¥¼ í†µí•´ ë” ë¹ ë¥´ê³  ì•ˆì •ì ì¸ í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ ë¬¸í™”ë¥¼ ë§Œë“¤ì–´ê°€ê³  ìˆìŠµë‹ˆë‹¤.

---

## 5. í–¥í›„ ê³¼ì œ

- **í…ŒìŠ¤íŠ¸ ë²”ìœ„ í™•ëŒ€**: ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ì—ì„œ í†µí•©(Integration), E2E í…ŒìŠ¤íŠ¸ë¡œ ì ì°¨ í™•ëŒ€
- **ì»¤ë²„ë¦¬ì§€ ëª©í‘œ ë‹¬ì„±**: í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ 70% ëª©í‘œ ë‹¬ì„±
- **ë¬¸í™” í™•ì‚°**: í…ŒìŠ¤íŠ¸ ì‘ì„± ë¬¸í™”ë¥¼ íŒ€ì„ ë„˜ì–´ ì „ì‚¬ë¡œ í™•ì‚°

---

> **ë°œí‘œ í›„ê¸°.** 
> 
> ë°œí‘œë¥¼ ë§ˆì¹œ í›„, ë§ì€ ë¶„ë“¤ì´ í…ŒìŠ¤íŠ¸ ìë™í™”ì— ê´€ì‹¬ì„ ë³´ì—¬ì£¼ì…¨ìŠµë‹ˆë‹¤. íŠ¹íˆ ì‹¤ì¥ë‹˜ê»˜ì„œ ì¢‹ì€ ì„¸ë¯¸ë‚˜ì— ëŒ€í•œ ê²©ë ¤ì™€ í•¨ê»˜ ê°„ì‹ë¹„ ì§€ì›ì„ ì•½ì†í•´ì£¼ì‹œë©° ë²•ì¸ì¹´ë“œë¥¼ ì£¼ì…¨ìŠµë‹ˆë‹¤. ğŸ¥³
> 
> <img src="/assets/img/2025-01-25/tdd_ppt_2.png" alt="ë°œí‘œ í›„ ì‹¤ì¥ë‹˜ ê²©ë ¤ ë©”ì‹œì§€" />
> 
> ì•ìœ¼ë¡œë„ ìœ ìµí•œ ê¸°ìˆ  ê³µìœ  ë¬¸í™”ë¥¼ ë§Œë“œëŠ” ë° ê¸°ì—¬í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤.
{: .prompt-tip }